bioguide: S001191
contact_form:
  method: POST
  action: "https://sinemaforms.house.gov/forms/writeyourrep/"
  steps:
    - visit: https://sinemaforms.house.gov/forms/writeyourrep/
    - fill_in:
      - name: "ctl00$ctl15$FirstName"
        selector: "#ctl00_ctl15_FirstName"
        value: $NAME_FIRST
        required: Yes
      - name: "ctl00$ctl15$LastName"
        selector: "#ctl00_ctl15_LastName"
        value: $NAME_LAST
        required: Yes
      - name: "ctl00$ctl15$Street"
        selector: "#ctl00_ctl15_Street"
        value: $ADDRESS_STREET
        required: Yes
      - name: "ctl00$ctl15$City"
        selector: "#ctl00_ctl15_City"
        value: $ADDRESS_CITY
        required: Yes
      - name: "ctl00$ctl15$Zip"
        selector: "#ctl00_ctl15_Zip"
        value: $ADDRESS_ZIP5
        required: Yes
      - name: "ctl00$ctl15$Phone"
        selector: "#ctl00_ctl15_Phone"
        value: $PHONE
      - name: "ctl00$ctl15$Email"
        selector: "#ctl00_ctl15_Email"
        value: $EMAIL
        required: Yes
    - select:
      - name: "ctl00$ctl15$PrefixList"
        selector: "#ctl00_ctl15_PrefixList"
        value: $NAME_PREFIX
        required: Yes
        options:
          - "Mr."
          - "Mrs."
          - "Dr."
          - "Ms."
      - name: "ctl00$ctl15$State"
        selector: "#ctl00_ctl15_State"
        value: $ADDRESS_STATE_POSTAL_ABBREV
        required: Yes
        options: # missing a few territories
          - "AL"
          - "AK"
          - "AZ"
          - "AR"
          - "CA"
          - "CO"
          - "CT"
          - "DE"
          - "DC"
          - "FL"
          - "GA"
          - "HI"
          - "ID"
          - "IL"
          - "IN"
          - "IA"
          - "KS"
          - "KY"
          - "LA"
          - "ME"
          - "MD"
          - "MA"
          - "MI"
          - "MN"
          - "MS"
          - "MO"
          - "MT"
          - "NE"
          - "NV"
          - "NH"
          - "NJ"
          - "NM"
          - "NY"
          - "NC"
          - "ND"
          - "OH"
          - "OK"
          - "OR"
          - "PA"
          - "RI"
          - "SC"
          - "SD"
          - "TN"
          - "TX"
          - "UT"
          - "VT"
          - "VA"
          - "WA"
          - "WV"
          - "WI"
          - "WY"
          - "AA"
          - "AE"
          - "AP"
          - "FM"
          - "GU"
          - "MH"
          - "MP"
          - "PR"
          - "VI"
      - name: "ctl00$ctl15$IssuesList"
        selector: "#ctl00_ctl15_IssuesList"
        value: $TOPIC
        options:
          "None": ""
          "Agriculture": "96144"
          "Animal Protection": "96139"
          "Defense": "96109"
          "Earned Benefits": "95646"
          "Education": "96143"
          "Energy": "95945"
          "Environment": "95584"
          "Financial Services": "96041"
          "Foreign Affairs": "95887"
          "Government Reform": "95873"
          "Healthcare": "96142"
          "Homeland Security": "95987"
          "Housing": "95778"
          "Immigration": "95764"
          "Judiciary": "95718"
          "Labor": "96044"
          "Native Americans": "95700"
          "Natural Resources": "96033"
          "Science": "95678"
          "Taxes": "95632"
          "Trade": "95654"
          "Transportation and Infrastructure": "96141"
          "Women's Issues": "95914"
    - choose:
      - name: "ctl00$ctl15$ReplyChoice"
        selector: "#ctl00_ctl15_ReplyChoice_0"
        value: "Respond"
        required: Yes
    - fill_in:
      - name: "ctl00_ctl15_Subject"
        selector: "#ctl00_ctl15_Subject"
        value: $SUBJECT
        required: true
      - name: "ctl00$ctl15$Body"
        selector: "#ctl00_ctl15_Body"
        value: $MESSAGE
        required: true
    - javascript:
      - value: document.querySelector("#ctl00_ctl15_Body").value = document.querySelector("#ctl00_ctl15_Body").value.replace(/"/g, '');
    - recaptcha:
      - value: true
    - click_on:
      - value: "Submit"
        selector: "input[name='ctl00$ctl15$SubmitButton']"
    - find:
      - selector: "span#ctl00_ctl15_ConfirmationText"
        value: "Thank you"
  success:
    headers:
      status: 200
    body:
      contains: "Thank"